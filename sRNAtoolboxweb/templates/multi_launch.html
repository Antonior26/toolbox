{#{% extends 'base.html' %}#}
{#{% extends 'photos/base.html' %}#}
{% extends "base.html" %}
{% load staticfiles %}

{% block content %}

{#{% load static %}#}

<link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">


{% block modals %}
    {% include "Messages/bench/sRNAbenchInput.html" %}
    {% include "Messages/bench/guess_Adapter.html" %}
    {% include "Messages/bench/library_mode.html" %}
    {% include "Messages/bench/minimum_adapter_length.html" %}
    {% include "Messages/bench/mismatches_adapter.html" %}
    {% include "Messages/bench/Not_profile.html" %}
    {% include "Messages/bench/RecursiveAdaptorTrimming.html" %}
    {% include "Messages/bench/speciesBench.html" %}
    {% include "Messages/bench/UploadUserFiles.html" %}
    {% include "Messages/bench/mirnas.html" %}
{% endblock %}

    {% block javascript %}
{#    <script src="{% static 'js/jquery-3.1.1.min.js' %}"></script>#}
{#    <script src="{% static 'js/bootstrap.min.js' %}"></script>#}
  {# JQUERY FILE UPLOAD SCRIPTS #}
  <script src="{% static 'js/jquery-file-upload/vendor/jquery.ui.widget.js' %}"></script>
  <script src="{% static 'js/jquery-file-upload/jquery.iframe-transport.js' %}"></script>
  <script src="{% static 'js/jquery-file-upload/jquery.fileupload.js' %}"></script>

  <script src="/static/vendors/datatables.net/js/jquery.dataTables.min.js"></script>
  <script src="/static/vendors/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
  <script src="/static/vendors/datatables.net-buttons/js/dataTables.buttons.min.js"></script>
  <script src="/static/vendors/datatables.net-buttons-bs/js/buttons.bootstrap.min.js"></script>
  <script src="/static/vendors/datatables.net-buttons/js/buttons.flash.min.js"></script>
  <script src="/static/vendors/datatables.net-buttons/js/buttons.html5.min.js"></script>
  <script src="/static/vendors/datatables.net-buttons/js/buttons.print.min.js"></script>
  <script src="/static/vendors/datatables.net-fixedheader/js/dataTables.fixedHeader.min.js"></script>
  <script src="/static/vendors/datatables.net-keytable/js/dataTables.keyTable.min.js"></script>
  <script src="/static/vendors/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
  <script src="/static/vendors/datatables.net-responsive-bs/js/responsive.bootstrap.js"></script>
  <script src="/static/vendors/datatables.net-scroller/js/dataTables.scroller.min.js"></script>

<script src="http://cdn.datatables.net/plug-ins/1.10.12/api/processing().js"></script>

{% endblock %}

{% block js %}


    <script>
    jQuery(document).ready(function() {
        jQuery('#id_species').multiselect({
            enableCollapsibleOptGroups: true,
            enableCaseInsensitiveFiltering: true,
            filterBehavior: 'both',
            maxHeight: 300,
            onDropdownHidden: function (e) {

                jQuery('#id_species_hidden').val(jQuery('#id_species').val().map(function(item) {
                return item.split(':')[0];}).join(','));
{#                alert(jQuery('#id_species').val().join(','));#}

            }

        });
    });
    </script>


    <script>
        // tooltip demo
        $('.row').tooltip({
            selector: "[data-toggle=tooltip]",
            container: "body"
        })

    </script>

    <script>
    function myFunction() {
        var x, text, message;
        message = "There were some errors in your job. Please select your input again and check for invalid options"

        x = document.getElementById("id_adapter_manual").value;


        if (!document.getElementById("id_species").value && !document.getElementById("id_mirna_profiled").value) {
            document.getElementById('id_ifile').value = "";
            alert(message); return true
{#            alert("species and mirna_profiled" + document.getElementById("id_species").value); return true#}
        }else if ((0 + Boolean(document.getElementById('id_ifile').value) + Boolean(document.getElementById('id_url').value) + Boolean(document.getElementById('id_sra_input').value )!=1)){
            document.getElementById('id_ifile').value = "";
{#            alert("id_file url");#}
{#            return true;#}
                        alert(message); return true
        }else if (document.getElementById('id_predict_mirna').checked && document.getElementById('id_library_mode').checked){
            document.getElementById('id_ifile').value = "";
{#            alert( " predict and library mode"); return true#}
            alert(message); return true
        }else if ((0 + document.getElementById('id_guess_adapter').checked + Boolean(document.getElementById('id_adapter_chosen').value) + Boolean(document.getElementById('id_adapter_manual').value )!=1)){
            document.getElementById('id_ifile').value = "";
{#            alert(message); return true#}
            alert("adapter row"); return true
        }else if (document.getElementById('id_guess_adapter').checked && !document.getElementById('id_species')){
            document.getElementById('id_ifile').value = "";
            alert(message); return true
{#            alert("guess without species"); return true#}
        }else if (document.getElementById('id_highconf').checked && document.getElementById('id_mirDB').value){
            document.getElementById('id_ifile').value = "";
            alert(message); return true
        }

    }
    </script>

    <script>
    $('input[name="referenceDB"]').on("click", function(e) {
        x = document.getElementById("id_referenceDB_3").checked;
        if (x==false){
            document.getElementById("div_id_mirDB").style.visibility="hidden";
            document.getElementById("id_mirDB").style.visibility="hidden";
{#            document.getElementById("show-me-three").style.visibility="hidden";#}
        }
        else{
            document.getElementById("div_id_mirDB").style.visibility="visible";
            document.getElementById("id_mirDB").style.visibility="visible";
        }
{#    if (e.clientX === 0 && e.clientY === 0) {#}
{#        console.log("keyboard");#}
{#    } else {#}
{#        console.log("mouse");#}
{#    };#}
{#        alert(x)#}
});
    </script>

    <script>

    var selectedItems=[];
    function printChecked(){
    $("input:checkbox[name=to_list]:checked").each(function() {
    selectedItems.push($(this).val());
    selectedItems=Array.from(new Set(selectedItems))
    });
    $("input:checkbox[name=to_list]:not(:checked)").each(function() {
    selectedItems=selectedItems.filter(e => e !== $(this).val());
    });
{#    alert(selectedItems);#}

    }
    function saveChecked() {
        document.getElementById('id_input_hidden').value = selectedItems.join();
        alert(document.getElementById('id_input_hidden').value)
    }
</script>


{% endblock %}



{#    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>#}
{#      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>#}
{#    <script src="{% static 'js/jquery-3.1.1.min.js' %}"></script>#}
{#    <script src="{% static 'js/bootstrap.min.js' %}"></script>#}

  {# PHOTOS PAGE SCRIPTS #}
{#  <script src="{% static 'photos/js/progress-bar-upload.js' %}"></script>#}

<div id="page-wrapper">
    <div class="row">
    <div class="col-md-9">

    <div class="panel panel-default">
    <div class="panel-heading">
        <h4 class="panel-title">
            <a data-toggle="collapse" href="#collapseOne">Uploaded data</a>
        </h4>

    </div>
    <div id="collapseOne" class="panel-collapse collapse in">
        <div class="panel-body">
        <div style="margin-bottom: 20px;">


{#            <table id="jobs" class="table table-striped table-bordered bulk_action"></table>#}
            <table id="jobs" class="table table-striped table-bordered table-hover dataTable no-footer"></table>
  </div>

            {% load crispy_forms_tags %}
            {% crispy form %}

        </div>

    </div>
</div>
    </div>
    </div>
</div>
{#{% block photos_content %}#}




<script>
    var received_data = {{ table_data|safe }};
    var received_cols = {{ table_headers|safe }}

    $(document).ready(function() {

    var table = $('#jobs').DataTable( {

//        'responsive': true,
        data: received_data,
//        processing: true,
//        serverSide: true,
//        deferRender: false,
        'language':{
       "loadingRecords": "&nbsp;",
      "processing": "Loading..."
    },
        columns: received_cols,
    } );

    $('#jobs tbody').on('click', 'tr', function () {
        var data = table.row( this ).data();
//        alert( 'You clicked on '+data[2]+'\'s row' );
        printChecked();
    } );
} );

</script>


{% endblock %}

